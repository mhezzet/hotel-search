(this.webpackJsonphotel=this.webpackJsonphotel||[]).push([[0],{134:function(e){e.exports=JSON.parse('{"uri":"https://api.myjson.com/bins"}')},150:function(e,t,a){e.exports=a(260)},259:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),l=a(20),s=a(100),o=a.n(s),u=a(132),m=a(103),h=a(105),p=a(133),f=a.n(p),b=a(134),O=f.a.create({baseURL:b.uri}),j=a(11),v=a.n(j);var E=function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase();return a>n?1:a<n?-1:0},_=function(e,t){var a=e.price,n=t.price;return a>n?1:a<n?-1:0},d=a(43),g=a.n(d),y=a(265),S=a(12),N=a(263),x=a(266),C=a(51),k=a(267),F=a(264),w=a(262);function B(e){var t=e.setSort,a=e.hotels,n=e.searchByName,c=e.priceFilterLimits,i=e.setPriceRange,s=e.onClose,o=e.nights,u=r.a.createElement(y.a,{onClick:function(e){return t(e.key)}},r.a.createElement(y.a.Item,{key:"name"},"name"),r.a.createElement(y.a.Item,{key:"price"},"price"));return console.log("hotels*",a),r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{className:g.a.close,onClick:s,type:"close"}),r.a.createElement("div",{className:g.a.grid},r.a.createElement("div",{className:g.a.header},r.a.createElement(N.a.Text,null,"Total Nights: ",o," "),r.a.createElement(x.a,{overlay:u},r.a.createElement(C.a,null,"Sort ",r.a.createElement(S.a,{type:"down"})))),r.a.createElement("div",{className:g.a.side},r.a.createElement(k.a.Search,{onChange:function(e){return n(e.target.value)},placeholder:"Hotel Name"}),r.a.createElement("h4",{className:g.a.priceFilterLabel},"price filter"),r.a.createElement(F.a,{onChange:function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return i({min:a,max:n})},range:!0,max:c.max,min:c.min,defaultValue:[c.min,c.max]})),r.a.createElement("div",{className:g.a.main},a.map((function(e,t){return r.a.createElement(w.a,{key:e.name,title:e.name},r.a.createElement("p",null,e.price,"$"),r.a.createElement("p",null,e.city))})),!a.length&&r.a.createElement("div",{className:g.a.noHotels},r.a.createElement(N.a.Text,null,"there is no hotels")))))}var L=a(261),R=a(68),H=a.n(R);function I(e){var t=e.onSearch,a=e.filterByDate,c=Object(n.useState)(null),i=Object(l.a)(c,2),s=i[0],o=i[1];return r.a.createElement("div",{className:H.a.searchContainer},r.a.createElement(N.a.Title,{className:H.a.title},"hotel search"),r.a.createElement("div",{className:H.a.search},r.a.createElement(L.a.RangePicker,{allowClear:!1,onChange:function(e){return o(e)}}),r.a.createElement(C.a,{disabled:!s,onClick:function(){a(s),t()},className:H.a.button,icon:"search"},"Search")))}var P=function(){var e=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=Object(l.a)(c,2),s=(i[0],i[1]),p=Object(n.useState)([]),f=Object(l.a)(p,2),b=f[0],j=f[1],d=Object(n.useState)([]),g=Object(l.a)(d,2),y=g[0],S=g[1],N=Object(n.useState)(""),x=Object(l.a)(N,2),C=x[0],k=x[1],F=Object(n.useState)(""),w=Object(l.a)(F,2),B=w[0],L=w[1],R=Object(n.useState)({}),H=Object(l.a)(R,2),I=H[0],P=H[1],U=Object(n.useState)({max:100,min:0}),M=Object(l.a)(U,2),T=M[0],D=M[1],J=Object(n.useState)(0),K=Object(l.a)(J,2),W=K[0],Z=K[1];Object(n.useEffect)((function(){var e=b;e=B?e.filter((function(e){return e.name.toUpperCase().includes(B.toUpperCase())})):b,Object.keys(I).length&&(e=e.filter((function(e){return parseInt(e.price)>=I.min&&parseInt(e.price)<=I.max}))),"name"===C&&(e=e.sort(E)),"price"===C&&(e=e.sort(_)),S(e)}),[C,B,I,b]);var A=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return e.split("-").reverse().join("-")},e.prev=1,e.next=4,O.get("/tl0bp");case 4:a=e.sent,r(a.data.hotels.map((function(e){return Object(h.a)({},e,{availability:e.availability.map((function(e){return{to:t(e.to),from:t(e.from)}}))})}))),L(""),P([]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return console.log("hotels maaan",y),{dateFilteredHotels:b,filterByDate:function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1],c=r.diff(n,"d"),i=a.filter((function(e){return e.availability.some((function(e){return n.isBetween(v()(e.from),v()(e.to))&&r.isBetween(v()(e.from),v()(e.to))}))})).map((function(e){return Object(h.a)({},e,{price:e.price*c})}));j(i),S(i),Z(c),D({max:Math.max.apply(Math,Object(m.a)(i.map((function(e){return parseInt(e.price)})))),min:Math.min.apply(Math,Object(m.a)(i.map((function(e){return parseInt(e.price)}))))})},fetchHotels:A,setNameFilter:L,priceRange:I,setSort:k,hotels:y,priceFilterLimits:T,setPriceRange:P,nights:W}}(),t=e.fetchHotels,a=e.filterByDate,c=e.setSort,i=e.setNameFilter,s=e.hotels,p=e.priceFilterLimits,f=e.setPriceRange,b=e.nights,j=Object(n.useState)("search"),d=Object(l.a)(j,2),g=d[0],y=d[1];return Object(n.useEffect)((function(){t()}),[]),r.a.createElement("div",null,"search"===g&&r.a.createElement(I,{filterByDate:a,onSearch:function(){return y("hotels")}}),"hotels"===g&&r.a.createElement(B,{searchByName:i,priceFilterLimits:p,setPriceRange:f,setSort:c,nights:b,hotels:s,onClose:function(){return y("search")}}))};a(258),a(259);i.a.render(r.a.createElement(P,null),document.getElementById("root"))},43:function(e,t,a){e.exports={grid:"hotels_grid__2KTya",side:"hotels_side__1OgRM",header:"hotels_header__33fYF",main:"hotels_main__2KXNP",priceFilterLabel:"hotels_priceFilterLabel__2fFnK",noHotels:"hotels_noHotels__38mwo",close:"hotels_close__3Wsnr"}},68:function(e,t,a){e.exports={searchContainer:"search_searchContainer__115pW",title:"search_title__3JZLb",search:"search_search__OmAUZ",button:"search_button__37PWU"}}},[[150,1,2]]]);
//# sourceMappingURL=main.6018048d.chunk.js.map