{"version":3,"sources":["app/utils/axios.js","app/hooks/useHotels.jsx","app/views/hotels/index.jsx","app/views/search/index.jsx","app/index.jsx","index.js","app/views/hotels/hotels.module.css","app/views/search/search.module.css"],"names":["hotelsAPI","axios","create","baseURL","config","uri","sortByName","hotelA","hotelB","nameA","name","toUpperCase","nameB","sortByPrice","priceA","price","priceB","Hotels","setSort","hotels","searchByName","priceFilterLimits","setPriceRange","onClose","nights","menu","onClick","value","key","Item","console","log","className","styles","close","type","grid","header","Text","overlay","side","Search","onChange","e","target","placeholder","priceFilterLabel","min","max","range","defaultValue","main","map","hotel","index","title","city","length","noHotels","onSearch","filterByDate","useState","date","setDate","searchContainer","Title","search","RangePicker","allowClear","disabled","button","icon","App","allHotels","setAllHotels","setServerError","dateFilteredHotels","setDateFilteredHotels","setHotels","sort","nameFilter","setNameFilter","priceRange","setPriceFilterLimits","setNights","useEffect","newHotels","filter","includes","Object","keys","parseInt","fetchHotels","a","fixDateFormat","split","reverse","join","get","response","data","availability","to","from","message","startDate","endtDate","diff","filteredHotels","some","isBetween","moment","Math","useHotels","view","setview","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.6018048d.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport config from '../../config.json'\r\n\r\nconst hotelsAPI = axios.create({\r\n  baseURL: config.uri\r\n})\r\n\r\nexport default hotelsAPI\r\n","import { useState, useEffect, useCallback } from 'react'\r\nimport hotelsAPI from '../utils/axios'\r\nimport moment from 'moment'\r\n\r\nexport default function useHotels() {\r\n  const [allHotels, setAllHotels] = useState([])\r\n  const [serverError, setServerError] = useState(null)\r\n  const [dateFilteredHotels, setDateFilteredHotels] = useState([])\r\n  const [hotels, setHotels] = useState([])\r\n  const [sort, setSort] = useState('')\r\n  const [nameFilter, setNameFilter] = useState('')\r\n  const [priceRange, setPriceRange] = useState({})\r\n  const [priceFilterLimits, setPriceFilterLimits] = useState({\r\n    max: 100,\r\n    min: 0\r\n  })\r\n  const [nights, setNights] = useState(0)\r\n\r\n  useEffect(() => {\r\n    let newHotels = dateFilteredHotels\r\n\r\n    if (nameFilter) {\r\n      newHotels = newHotels.filter(hotel =>\r\n        hotel.name.toUpperCase().includes(nameFilter.toUpperCase())\r\n      )\r\n    } else {\r\n      newHotels = dateFilteredHotels\r\n    }\r\n\r\n    if (Object.keys(priceRange).length) {\r\n      newHotels = newHotels.filter(\r\n        hotel =>\r\n          parseInt(hotel.price) >= priceRange.min &&\r\n          parseInt(hotel.price) <= priceRange.max\r\n      )\r\n    }\r\n\r\n    if (sort === 'name') {\r\n      newHotels = newHotels.sort(sortByName)\r\n    }\r\n\r\n    if (sort === 'price') {\r\n      newHotels = newHotels.sort(sortByPrice)\r\n    }\r\n\r\n    setHotels(newHotels)\r\n  }, [sort, nameFilter, priceRange, dateFilteredHotels])\r\n\r\n  const filterByDate = ([startDate, endtDate]) => {\r\n    const nights = endtDate.diff(startDate, 'd')\r\n\r\n    const filteredHotels = allHotels\r\n      .filter(hotel =>\r\n        hotel.availability.some(\r\n          date =>\r\n            startDate.isBetween(moment(date.from), moment(date.to)) &&\r\n            endtDate.isBetween(moment(date.from), moment(date.to))\r\n        )\r\n      )\r\n      .map(hotel => ({ ...hotel, price: hotel.price * nights }))\r\n\r\n    setDateFilteredHotels(filteredHotels)\r\n    setHotels(filteredHotels)\r\n\r\n    setNights(nights)\r\n\r\n    setPriceFilterLimits({\r\n      max: Math.max(...filteredHotels.map(hotel => parseInt(hotel.price))),\r\n      min: Math.min(...filteredHotels.map(hotel => parseInt(hotel.price)))\r\n    })\r\n  }\r\n\r\n  const fetchHotels = async () => {\r\n    const fixDateFormat = date =>\r\n      date\r\n        .split('-')\r\n        .reverse()\r\n        .join('-')\r\n\r\n    try {\r\n      const response = await hotelsAPI.get('/tl0bp')\r\n      setAllHotels(\r\n        response.data.hotels.map(hotel => ({\r\n          ...hotel,\r\n          availability: hotel.availability.map(date => ({\r\n            to: fixDateFormat(date.to),\r\n            from: fixDateFormat(date.from)\r\n          }))\r\n        }))\r\n      )\r\n      setNameFilter('')\r\n      setPriceRange([])\r\n    } catch (error) {\r\n      setServerError(error.message)\r\n    }\r\n  }\r\n\r\n  console.log('hotels maaan', hotels)\r\n\r\n  return {\r\n    dateFilteredHotels,\r\n    filterByDate,\r\n    fetchHotels,\r\n    setNameFilter,\r\n    priceRange,\r\n    setSort,\r\n    hotels,\r\n    priceFilterLimits,\r\n    setPriceRange,\r\n    nights\r\n  }\r\n}\r\n\r\nconst sortByName = (hotelA, hotelB) => {\r\n  const nameA = hotelA.name.toUpperCase()\r\n  const nameB = hotelB.name.toUpperCase()\r\n\r\n  if (nameA > nameB) return 1\r\n  if (nameA < nameB) return -1\r\n\r\n  return 0\r\n}\r\n\r\nconst sortByPrice = (hotelA, hotelB) => {\r\n  const priceA = hotelA.price\r\n  const priceB = hotelB.price\r\n\r\n  if (priceA > priceB) return 1\r\n  if (priceA < priceB) return -1\r\n\r\n  return 0\r\n}\r\n","import React from 'react'\r\nimport styles from './hotels.module.css'\r\nimport {\r\n  Dropdown,\r\n  Button,\r\n  Icon,\r\n  Menu,\r\n  Typography,\r\n  Input,\r\n  Slider,\r\n  Card\r\n} from 'antd'\r\n\r\nexport default function Hotels({\r\n  setSort,\r\n  hotels,\r\n  searchByName,\r\n  priceFilterLimits,\r\n  setPriceRange,\r\n  onClose,\r\n  nights\r\n}) {\r\n  const menu = (\r\n    <Menu onClick={value => setSort(value.key)}>\r\n      <Menu.Item key='name'>name</Menu.Item>\r\n      <Menu.Item key='price'>price</Menu.Item>\r\n    </Menu>\r\n  )\r\n\r\n  console.log('hotels*', hotels)\r\n\r\n  return (\r\n    <>\r\n      <Icon className={styles.close} onClick={onClose} type='close' />\r\n\r\n      <div className={styles.grid}>\r\n        <div className={styles.header}>\r\n          <Typography.Text>Total Nights: {nights} </Typography.Text>\r\n          <Dropdown overlay={menu}>\r\n            <Button>\r\n              Sort <Icon type='down' />\r\n            </Button>\r\n          </Dropdown>\r\n        </div>\r\n\r\n        <div className={styles.side}>\r\n          <Input.Search\r\n            onChange={e => searchByName(e.target.value)}\r\n            placeholder='Hotel Name'\r\n          />\r\n          <h4 className={styles.priceFilterLabel}>price filter</h4>\r\n          <Slider\r\n            onChange={([min, max]) => setPriceRange({ min, max })}\r\n            range\r\n            max={priceFilterLimits.max}\r\n            min={priceFilterLimits.min}\r\n            defaultValue={[priceFilterLimits.min, priceFilterLimits.max]}\r\n          />\r\n        </div>\r\n        <div className={styles.main}>\r\n          {hotels.map((hotel, index) => (\r\n            <Card key={hotel.name} title={hotel.name}>\r\n              <p>{hotel.price}$</p>\r\n              <p>{hotel.city}</p>\r\n            </Card>\r\n          ))}\r\n          {!hotels.length && (\r\n            <div className={styles.noHotels}>\r\n              <Typography.Text>there is no hotels</Typography.Text>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { DatePicker, Button, Typography } from 'antd'\r\nimport styles from './search.module.css'\r\n\r\nexport default function Search({ onSearch, filterByDate }) {\r\n  const [date, setDate] = useState(null)\r\n\r\n  return (\r\n    <div className={styles.searchContainer}>\r\n      <Typography.Title className={styles.title}>hotel search</Typography.Title>\r\n      <div className={styles.search}>\r\n        <DatePicker.RangePicker\r\n          allowClear={false}\r\n          onChange={date => setDate(date)}\r\n        />\r\n        <Button\r\n          disabled={!date}\r\n          onClick={() => {\r\n            filterByDate(date)\r\n            onSearch()\r\n          }}\r\n          className={styles.button}\r\n          icon='search'\r\n        >\r\n          Search\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\nimport useHotels from './hooks/useHotels'\nimport Hotels from './views/hotels'\nimport Search from './views/search'\n\nfunction App() {\n  const {\n    fetchHotels,\n    filterByDate,\n    setSort,\n    setNameFilter,\n    hotels,\n    priceFilterLimits,\n    setPriceRange,\n    nights\n  } = useHotels()\n  const [view, setview] = useState('search')\n\n  useEffect(() => {\n    fetchHotels()\n  }, [])\n\n  return (\n    <div>\n      {view === 'search' && (\n        <Search\n          filterByDate={filterByDate}\n          onSearch={() => setview('hotels')}\n        />\n      )}\n      {view === 'hotels' && (\n        <Hotels\n          searchByName={setNameFilter}\n          priceFilterLimits={priceFilterLimits}\n          setPriceRange={setPriceRange}\n          setSort={setSort}\n          nights={nights}\n          hotels={hotels}\n          onClose={() => setview('search')}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app'\nimport 'antd/dist/antd.css'\nimport '../src/app/styles/base.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"hotels_grid__2KTya\",\"side\":\"hotels_side__1OgRM\",\"header\":\"hotels_header__33fYF\",\"main\":\"hotels_main__2KXNP\",\"priceFilterLabel\":\"hotels_priceFilterLabel__2fFnK\",\"noHotels\":\"hotels_noHotels__38mwo\",\"close\":\"hotels_close__3Wsnr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchContainer\":\"search_searchContainer__115pW\",\"title\":\"search_title__3JZLb\",\"search\":\"search_search__OmAUZ\",\"button\":\"search_button__37PWU\"};"],"sourceRoot":""}